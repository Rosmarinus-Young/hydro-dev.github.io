(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{544:function(t,s,a){"use strict";a.r(s);var r=a(1),e=Object(r.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"常规部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常规部署"}},[t._v("#")]),t._v(" 常规部署")]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),a("p",[t._v("不建议在 Windows 下安装 Hydro。"),a("br"),t._v("\nCentOS 的内核版本过于老旧，可能会导致沙箱安全性问题。")])]),t._v(" "),a("p",[t._v("这里将为您展示如何手动部署 Hydro。")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("Tips")]),t._v(" "),a("p",[t._v("在下面的手动部署过程中，若您遇到了一些困难，也许可以考虑参考 "),a("a",{attrs:{href:"https://github.com/hydro-dev/Hydro/tree/master/install",target:"_blank",rel:"noopener noreferrer"}},[t._v("自动安装脚本"),a("OutboundLink")],1),t._v(" 的部分脚本。")])]),t._v(" "),a("h2",{attrs:{id:"mongodb"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mongodb"}},[t._v("#")]),t._v(" MongoDB")]),t._v(" "),a("p",[t._v("Hydro 需要 "),a("a",{attrs:{href:"https://www.mongodb.com/try/download/community",target:"_blank",rel:"noopener noreferrer"}},[t._v("MongoDB"),a("OutboundLink")],1),t._v(" 提供数据库服务。")]),t._v(" "),a("h2",{attrs:{id:"s3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#s3"}},[t._v("#")]),t._v(" S3")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("Tips")]),t._v(" "),a("p",[t._v("如果您希望采用其他方式来提供S3服务（如 腾讯云COS、阿里云OSS、Amazon S3、wasabi 等），请跳过此步。")])]),t._v(" "),a("p",[t._v("这里推荐使用 "),a("a",{attrs:{href:"https://min.io",target:"_blank",rel:"noopener noreferrer"}},[t._v("MinIO"),a("OutboundLink")],1),t._v(" 在本机上为 Hydro 提供 S3 服务。")]),t._v(" "),a("h2",{attrs:{id:"nodejs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nodejs"}},[t._v("#")]),t._v(" NodeJS")]),t._v(" "),a("p",[t._v("建议使用 nvm 安装 NodeJS。")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://nvm.sh/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Linux"),a("OutboundLink")],1),t._v(" "),a("a",{attrs:{href:"https://github.com/coreybutler/nvm-windows",target:"_blank",rel:"noopener noreferrer"}},[t._v("Windows"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("您也需要安装 yarn。")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -g "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h2",{attrs:{id:"hydro"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hydro"}},[t._v("#")]),t._v(" Hydro")]),t._v(" "),a("p",[t._v("在进行此步前，您应该确保已经完成上述步骤，然后可以运行下面的指令安装 Hydro。")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" -g\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" global "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" hydrooj @hydrooj/ui-default\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h2",{attrs:{id:"运行-hydro"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#运行-hydro"}},[t._v("#")]),t._v(" 运行 Hydro")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("Tips")]),t._v(" "),a("p",[t._v("请注意在您的服务器的防火墙/安全组中放通对应端口。")])]),t._v(" "),a("p",[t._v("您可以使用下面的指令运行 Hydro，Hydro 将会自行初始化并监听 8888 端口。")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("hydrooj\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("Tips")]),t._v(" "),a("p",[t._v("单个 Hydro 实例需要约 100MB 的运行内存。（取决于安装的模块数量与大小）")])]),t._v(" "),a("p",[t._v("您也可以同时使用下面的附加参数。")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("--port=8888")]),t._v(" 指定启动端口")]),t._v(" "),a("li",[a("code",[t._v("--debug")]),t._v(" 启用开发模式")]),t._v(" "),a("li",[a("code",[t._v("--ignorelock")]),t._v(" 忽略lockfile（不建议）")]),t._v(" "),a("li",[a("code",[t._v("--ui=/path/to/ui")]),t._v(" 使用指定文件夹下的 UI")]),t._v(" "),a("li",[a("code",[t._v("--template=/path/to/template")]),t._v(" 使用指定文件夹下的页面模板（不进行缓存）")]),t._v(" "),a("li",[a("code",[t._v("--public=/path/to/public")]),t._v(" 使用指定文件夹的 public 目录")])]),t._v(" "),a("h2",{attrs:{id:"使用-pm2-守护程序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-pm2-守护程序"}},[t._v("#")]),t._v(" 使用 pm2 守护程序")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" global "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" pm2 "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装pm2")]),t._v("\npm2 startup "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 开机自启")]),t._v("\npm2 start hydrooj "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 启动 Hydro")]),t._v("\npm2 save "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 保存")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("p",[t._v("更多 pm2 操作可参考"),a("RouterLink",{attrs:{to:"/install/auto/#使用-pm2-守护程序"}},[t._v("此处")])],1),t._v(" "),a("p",[t._v("完成后可以前往"),a("RouterLink",{attrs:{to:"/install/init/"}},[t._v("初始化")]),t._v("。")],1)])}),[],!1,null,null,null);s.default=e.exports}}]);