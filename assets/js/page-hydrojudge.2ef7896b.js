(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{518:function(a,t,s){"use strict";s.r(t);var e=s(1),r=Object(e.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"hydrojudge"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hydrojudge"}},[a._v("#")]),a._v(" hydrojudge")]),a._v(" "),s("h2",{attrs:{id:"准备"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#准备"}},[a._v("#")]),a._v(" 准备")]),a._v(" "),s("p",[a._v("在配置评测机之前，请确认您的站点已经可以访问并正常登录/注册。")]),a._v(" "),s("p",[a._v("您应该预先下载您所要支持的语言的编译器，若您在配置完评测机后 升级/重新安装 了编译器，您需要重新启动评测机。")]),a._v(" "),s("p",[a._v("前往 "),s("a",{attrs:{href:"https://github.com/criyle/go-judge/releases",target:"_blank",rel:"noopener noreferrer"}},[a._v("criyle/go-judge"),s("OutboundLink")],1),a._v(" 下载 executorserver。")]),a._v(" "),s("table",[s("thead",[s("tr",[s("th",[a._v("系统版本")]),a._v(" "),s("th",[a._v("文件名")])])]),a._v(" "),s("tbody",[s("tr",[s("td",[a._v("Windows 7+")]),a._v(" "),s("td",[a._v("executorserver.exe")])]),a._v(" "),s("tr",[s("td",[a._v("Linux 4.4+")]),a._v(" "),s("td",[a._v("executorserver-amd64")])]),a._v(" "),s("tr",[s("td",[a._v("MacOS ?+")]),a._v(" "),s("td",[a._v("executorserver-macos")])])])]),a._v(" "),s("p",[a._v("Executorserver 需要在后台"),s("strong",[a._v("以 root 权限")]),a._v("运行并监听 "),s("code",[a._v("127.0.0.1:5050")]),a._v(" 。\n可使用 pm2 进行管理。")]),a._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[a._v("Tips")]),a._v(" "),s("p",[a._v("如果您是 vj4 用户，请使用“作为独立进程”配置（设置处需设成 "),s("code",[a._v("type: vj4")]),a._v("）。")])]),a._v(" "),s("h2",{attrs:{id:"安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[a._v("#")]),a._v(" 安装")]),a._v(" "),s("h3",{attrs:{id:"作为附加组件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#作为附加组件"}},[a._v("#")]),a._v(" 作为附加组件")]),a._v(" "),s("p",[a._v("安装 "),s("code",[a._v("@hydrooj/hydrojudge")]),a._v("。")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" global "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" @hydrooj/hydrojudge\nhydrooj addon "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" @hydrooj/hydrojudge\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[a._v("重启 Hydro 后 HydroJudge 即可正常运行。")]),a._v(" "),s("h3",{attrs:{id:"作为独立进程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#作为独立进程"}},[a._v("#")]),a._v(" 作为独立进程")]),a._v(" "),s("p",[a._v("首先需要创建一个有 PRIV_JUDGE 权限的账户，具体方法参照 "),s("RouterLink",{attrs:{to:"/install/cli/#创建评测账号"}},[a._v("此处")]),a._v("（在部署网页端的服务器上进行）"),s("br"),a._v("\n（vj4 用户需参照 "),s("a",{attrs:{href:"https://github.com/vijos/vj4#judging",target:"_blank",rel:"noopener noreferrer"}},[a._v("vj4 的方法"),s("OutboundLink")],1),a._v(" 创建账户）。")],1),a._v(" "),s("p",[a._v("然后在运行评测机的服务器上执行下面的操作。")]),a._v(" "),s("p",[a._v("安装 hydrojudge 插件。")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" global "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" @hydrooj/hydrojudge\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("创建目录 "),s("code",[a._v("~/.config/hydro")]),a._v("，在该目录下创建文件 "),s("code",[a._v("judge.yaml")]),a._v("，配置文件格式如下：")]),a._v(" "),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("hosts")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("localhost")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" hydro "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# vj4 用户请在此处填写 vj4")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("server_url")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" http"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("//localhost"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("8888/ "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Hydro 运行的网址")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("uname")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" judge "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 评测账号用户名")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("password")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" abc123 "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 评测账号密码")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("detail")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[a._v("true")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 默认为 true")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br")])]),s("p",[a._v("设置完之后，使用下面的指令即可开始运行（可以使用 pm2 管理）：")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("hydrojudge\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h2",{attrs:{id:"更新"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#更新"}},[a._v("#")]),a._v(" 更新")]),a._v(" "),s("p",[a._v("HydroJudge 会发布不定期更新。您可以使用 "),s("code",[a._v("yarn global upgrade-interactive --latest")]),a._v(" 来检测并进行更新。")]),a._v(" "),s("h2",{attrs:{id:"关闭"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#关闭"}},[a._v("#")]),a._v(" 关闭")]),a._v(" "),s("h3",{attrs:{id:"作为附加组件-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#作为附加组件-2"}},[a._v("#")]),a._v(" 作为附加组件")]),a._v(" "),s("p",[a._v("在 系统设置>hydrojudge 中有一栏 Disable builtin judge，将它勾上，然后重启 Hydro 即可。")]),a._v(" "),s("h3",{attrs:{id:"作为独立进程-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#作为独立进程-2"}},[a._v("#")]),a._v(" 作为独立进程")]),a._v(" "),s("p",[a._v("根据开启的方法关闭即可。")]),a._v(" "),s("h2",{attrs:{id:"卸载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#卸载"}},[a._v("#")]),a._v(" 卸载")]),a._v(" "),s("p",[a._v("关闭后运行下面指令即可。")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" global remove @hydrooj/hydrojudge\nhydrooj addon remove @hydrooj/hydrojudge\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h2",{attrs:{id:"评测设置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#评测设置"}},[a._v("#")]),a._v(" 评测设置")]),a._v(" "),s("h3",{attrs:{id:"作为附加组件-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#作为附加组件-3"}},[a._v("#")]),a._v(" 作为附加组件")]),a._v(" "),s("p",[a._v("在 系统设置>hydrojudge 修改对应的参数，然后重启 Hydro 即可。")]),a._v(" "),s("h3",{attrs:{id:"作为独立进程-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#作为独立进程-3"}},[a._v("#")]),a._v(" 作为独立进程")]),a._v(" "),s("p",[a._v("如果有需要修改单题测试点数量上限等设置，可以在 "),s("code",[a._v("~/.config/hydro/judge.yaml")]),a._v(" 中添加如下内容。")]),a._v(" "),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("testcases_max")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 单题最多测试点数量")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("total_time_limit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("120")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 单题最大总测试时长")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("parallelism")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 单评测机评测进程数量")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 更多可选配置均可添加在此处，格式与前面的三排类似")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("p",[a._v("在 "),s("a",{attrs:{href:"https://github.com/hydro-dev/Hydro/blob/9c0afa38e3e6fa886ab9e9237847893fa6714392/packages/hydrojudge/src/config.ts#L12",target:"_blank",rel:"noopener noreferrer"}},[a._v("此处"),s("OutboundLink")],1),a._v(" 的设置均可添加到可选配置处。")]),a._v(" "),s("h2",{attrs:{id:"修改编译选项-添加新语言支持"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#修改编译选项-添加新语言支持"}},[a._v("#")]),a._v(" 修改编译选项/添加新语言支持")]),a._v(" "),s("p",[a._v("首先需要修改编译指令配置文件。")]),a._v(" "),s("p",[a._v("对于内置评测机（作为附加组件安装的评测机），在 控制面板>系统设置 中修改 judge.langs 配置项即可。"),s("br"),a._v("\n对于独立评测机（作为独立进程安装的评测机），修改 "),s("code",[a._v("~/.config/hydro/langs.yaml")]),a._v(" 文件即可。"),s("br"),a._v("\n按照 "),s("a",{attrs:{href:"https://github.com/hydro-dev/Hydro/blob/d33401c4e99ad3f125500a77637e9f486cb24c0b/packages/hydrojudge/setting.yaml#L41",target:"_blank",rel:"noopener noreferrer"}},[a._v("此处"),s("OutboundLink")],1),a._v(" 格式即可。")]),a._v(" "),s("p",[a._v("如果您添加了新的语言，您还需要前往 控制面板>系统设置 中修改 Language Highlight ID 与 Monaco language modes。"),s("br"),a._v("\n分别表示选择对应的语言后的高亮设置（基于 PrismJS）和 Monaco 编辑器语法规则设置。")]),a._v(" "),s("h2",{attrs:{id:"测试数据格式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#测试数据格式"}},[a._v("#")]),a._v(" 测试数据格式")]),a._v(" "),s("p",[a._v("参照 "),s("RouterLink",{attrs:{to:"/docs/problem/#测试数据格式"}},[a._v("测试数据格式")]),a._v(" 配置。")],1)])}),[],!1,null,null,null);t.default=r.exports}}]);